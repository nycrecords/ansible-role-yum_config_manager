language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: redis
  - EC2_REGION: us-east-1
  - secure: eiPo9xFJm3nMxhsNXTH31hd2tT5d2JLOorOtjk/UG5bZAowC6ch0h6AF/5rw6RqZIflBUPnYjPwyp0OEZAJBYeLPu0t5A1d9ctclPZAzMnyiUse697U9p6SpAHxqyAVplA81SFnAJRouHo6H1S8MRIWYV+PF/NXLdoKqf7piZtnnsCmW5jBtGkP7vpa3kf3dbRtahhpLvqoJsdLihE4oRxl8rsRDcTD5aOeuq2q+PHGgYUYH0i9tXc3cR19LxpZDiqpSyPaBdwwLJXMdcGwvW19Fq9ejTN09ex+24If3I9qR27J9jeCe3o+isAcvTxCq888jttMwxdyUCss8gdxOLbz9wyMmeEhDkKtRwnvWaRjeavaPmk8rYf8TRhhUsJiivr0Ra/dprrn1OJRwzqBmHTBkKqgPR4VpleXralz/0wtCe0kOIvIeNEq27WuvNKoXpjKhBCD51NvZp5pkvhofdeehXf5+UQuZ4NJD9iMyBvRDxlmYBT5FGgTJPZj4Kz/7m0fhEGbMOkan+jOuB1gy8eKcLvw3l4KCktZFCQPMYAo1ylpEk+IF6MwWdo7bzZs/ivTgs/UTo4io7a6O5sVx8AAiANQRG6qobv8nE7eGygq5FxXlUF5iY88Vo8yw22lVq4duNqIFPugVjELP9Cvc0xInhu/ckdDJn88P4FFHNHw=
  - secure: duRzM9Jy4buO7FwZ8b/in2F3Ea6+qCD+SeWsexGNE6He2m0s9GcY1inZYcp6DXlI9XJCZSZ2SsskIXDCLlKvH/eJw2eLGSDVVzkj+rbaf4PowF1oD9AOdFDZFOwC73PX3XE7TAtuyCL6gdPYf2SS8eyo+Pzd6SSpGVQcl0mCCqwI92exeCYZT+DXAUw682GiLMEvM4c8Qqwk3mSCe1zeowOkqaG3cgQPMi0rmExUQfyNnpP7WM9sGPukJ8xZHGtjlBpYiUkFc6HoNqUCyUrnV38D6P6fiFAQYNtRF/I80+mb8YVmkCAmQm3pmjjH8lpwWON0JjK3xcLprNjmW9ia1FEsEIM1rVAwzKebXlnBERrNa7Ysb2sTruqhSjuRpuaQEJxR1XisHn/DEo8/ZqEJepbN9gPKU7tRjfWAp+6BpUBziGTmvctHjTgo04Wn0dBhCobKJ5tl2lHjxsREWOx5VDLkpv085EFSc2KBVK/8j7xh1/oIzvsexKMs5jGkfEFLDeh1N6NYhjbo03m/Io36sZ5NaS5R0Jk++vr47FLoEOrAyMXKI9vS09xc1pVbP9Mvw78t58ekRRp/TiWntiyIIf57acl9Eh6Ru8tE/I5GO8LslU8zxEVCKZwFP2Pmx6fyswD7GNjnwfgEr1DRH7974OfBlFie2av/ZAUFjaSazqA=
  - secure: to8hCa0AhcVCvBGsPThzTsZd5waK6oWh/l/Dej6RlCXAZia70CFWMOTw+aBai/obqV/cWfWNwP86pMiRGrw5mzZZQBIeJJALY5O0B2MdqH2jd1yW2lTg2FTYvqaJPRrNC5mDaE24PJlj4zgSKE1faqThfKedldYXLcZv87NyAsQbrNgDrqOvc6nKkw4glt2vGr+iMs7l7SSqQlmOo78fM1lyKe8eqC8HI2dH16BJsa/34C/x0Z5qL+oUBBGGUUyMf+cN7c82BdFz42+qd26KPTAXvEZT0wxNAvzYWHls5gcJ09ybq4QFQk9qP9I9aecxGS5hlsTCcQ37aD/QK15FtdSghzEYGFeEZ67yQUdBwO/SAqnbXdSJBbhYqRagsgTyTPiO2Ssk8U0Kg7MuN9fOtRxnSg/R9VuaOBUx+r4jDiJdUFepfq/gKjEhjxRoduKtySUGm7j40NLxcqx10N9c3iThWoI4ptRK7u0AGIOnv5Lho7WCRa7F157wJCxArLXR/69eW7aos+SyDbii6pn814GKzPRIIpR3mCyeFvUbUnQ1TzXqDCuexb0N0duVyGNs+pugs40/XB4ZJo8Dt2pBPJANH4ZAxfLCTBlbbL+K0mI2tBcifkriASv9piBgmHe6xa+DDyJlmlJz/7OGq9C1xtShrqZxKzTkCOYly94QoC8=
  - secure: ry4WfmnR7VGhVJYih9CQIDRRp6Fd+qPbrBv6QdSRTmmy2efeQkj40ra4k+IWp6D5wH0IH4CMo6+DeyXjZlPicU9tl3KolwQMchutg2k6mQhXdM+Efa8Oe7hYoAmDYwwgFu7OWwDWDblYFePlMGEfBsPE1LsTM24hH+3fmKHY2+/J8IYgZIeuUCRr4gEZEMC5TNzzV/GTsOsM4Uw1Of3o9VPJxKGYQwOhe6/ngqFajvlf5BsakU9diHXTnxpD3eiXS5J1rKMn88Z4X8c3LSm02gWOk5HLQXTKONLdVpmPChDwSArSmKIUgaDUz2XpqBeHPgZL4pI1guHiYdwkO7jtCG0J0wXA7R4ok+A8HwedzM2toZPCwFu6mnD0ICaP/26OC9r5bdxUFftgNowYFOStTcAIrLT5fbHvZKRYdTnxQujAlWaQauONj9C7k6NWHpkSpvYoepx/a3v8Y9/O3S2zyCj1XVscFZlaBV4cSHfSXphoRdOYjOMlK8TCcOfwWyUDNW7kv7Nuj+aO9eK6ZVEXct262blDP9t71NTMXuQEyylm0sIIAMM8SW+rhlqzb/4OWT2Jv2GZPs35S7hAFyD0qWChqrMR3jY3U+hPIPLgNmBN7j4aUVdTki/BuVsGBPe+3X0bJ21II7speh4cPABiUPNjy28c7hpiLtzNhB0qsgE=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
