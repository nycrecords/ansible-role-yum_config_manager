language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: redis
  - EC2_REGION: us-east-1
  - secure: z6BLo4tJ3+sAewdvNGvC3PKo3+ij0aejTVt6+BGgOIArIkFpnFnRnwDsvhA4QNBWmYDTBsJzFEOv1fJ1A7g3QM9+RhP0Q1RQDevyow3uLt9X/LqsweUvD3OlUzd0d+M+3yswfwhmmY+6Hj97RDtvpu6v2qw3qx/NlWxdxPPBQZNZ79x8sMSR1O5hf4Oxcz/xCnKnRBGUcqJTD3Vm28FMi584x2f9kokOlFo/B4Xv88lC5mN9/AGlZAnaXbKtw7x5wnn1WaJUyWdMLL2g+S1m+1VRDH9Ove7jZYfgutVIKASM/bygYVZKH90RuNyrEdtnnjrJhcXnTjOqmqwaonQEdmfkvII1hbXlMhKgew0Jvd9PTqg5Y6q0tIfTFcFKCwO3/hrNFyKUbehWpfOjEqQKaBCKOoS3jG7DK6WAb48beRgV4Meq1HVMktQDZKecVcnYxUuMcCJziRf+r7XN4Tq5LMLZ7OjMV2oiuPk16vMrZ3QLe6bf7QoRHof2e8ZY3iBB3Byr9emJQfoHix6NVj/K/aC127RqDHo5CMDdse5oixV7WZ39gEEnP2O8UR87pUvgS44/QHKXsS98P7JPbLry+ctDgrmqKm61Z8mIfuWmVq8l5fsQqvfuYzlunfYe6YpWH1YyWhrqvo1brUaGBPu5r6IqkSW43xy2Ofbw2itvvh0=
  - secure: MIYbOd/2R1ROBF97Ut3ZXAW1xWQiZFsHGdR0M64Z3OikmO91S2BPMg8kpq/6ChRdGfQpn9BFwj6jbxXfSSVJxLKIG4tmnKRQuOK1piTN6rnzKdJ0AlNZY0FCqksxGGVaEboKuWT1LX/3/AtDUl0VYG2pFnYv3wan8WC/uJcwrHnokoya4nTOKe/xhH3FhTH5V6tG6xhAjOY03s6HPrtjXOakdLrsJawBKP0tzUTWISK/d41xwwmQ20bRNQixbRoC0AJO6n+J4r6qTlN8N6O98RYomNwxGxUMw7lwWBRvThup2x4fiCQAohVaOAgeKrtTw4tMI00KSmNOhvxzJ7KOWmYCN5LQX2S8Uj53+/QrJWasv+8Dlc7JJwKeBErqHYlGokoO0cO8adce34HCSeokR/gPQ3LSeW/3OiXB/dFto0uaJDIzcYtXeF70dN84EOzN3MwW7CFg68tJAvZw0yEFHpvLZrUStb+sqRWZBhYNvTKZjDoCDJQpp2efQFfAnVWb5oml3s1STnwK3Frga21CVPWc7oQrl2SKuGUAmqyTd0tBzxGlOL6f3T6dN1IJRYdJYaXGhEUDpnq2XcYcWZcfH0POM6SmFWDa8p1/wJes0YjpEVeuC1BFPSofJh3jXs4Wtyg1tVHhsO+vFAlHDANFnTBvfsIYvSzjIYt+fuPW+c0=
  - secure: ElBs67wACl+/6oqqdgCbiWP8h5Gm3T+YJnVUdkokAAi6FiyneBZ2Y7yumyd673h2yFwLSHrautdUinuVFk5nAvPaxS6F0EQxrCCoGuGx/F3EzMcNIZsI/72o1Hp+CwwokLY3tUSUXiJo6a3gWiqOLneV2007yQOq0vjiYUDPWWxrf6mM/QihyQaDq55PbIyqVQpHqARV6RaeOw8fI4jwqbcFTHQSd5JNXMuHrz9Bvt8HTfU1/KBIi4BifRklsI17kqBaWBXAiJ8sFxLsIw9KVYROsiCjTy9rLv+uc23NN0PyTLbt02NWNsqTP0alTdSWUx8FxYVYC6CQ53G9J6IbmXty0cNfmkEAn8VtPA7i5CvNuhwAnmVy7A4fKJJVMdZgNysrlO9BznyrEQXI1FPuWV2d2dbNqQKJIfbm9zLlvFNXzIEaUos6AkBdzfngLz3XPtbplaRmBeyvFITru6ytBW89qztfb8CsUpl40JfSO8JTJGOclXpmwmnP2/YucGdWkomP8Ux2LZwoNB5r9/hMGBMGFKHoZf1BaB/3qUYoikvlPeR9+G8qA9ziWMMIvuUiuEOeY0CPed84ZAFleD2bpRgImwd37vfm/5MgfeUCNIpbLdkrREQk8cvtj7krmIjeWJWZfckxBhD0Moh3OoVzKmYjHFOgeBx0RCOsfRfVvUA=
  - secure: YSA0XpvoODvUldEnw5sXe+FxF0NojOYSHaZi8qpc2tqM9nb24IbOGMvJmrEPBLtN0zUNifTC9rWPHpJ4ApGBAfF6tl+U8HRoeGDMP5tvy+wW6KaICjWX1kMBkt6JvAsIRa2twzYN8sMqG7bmKUePcCWxzd3F7Uixs4T1chkGFlj0GumQ9eWizIJ+6VjoKnODLgc0gLw5hy8nH9DxdzwAydulvrmPWNOy4zNXuSqdqZGNZjL3YN94kRdk44iE4SovXoSCOusiWMCXKpd1B+VBIiiTn68gd5vviujI/zT0Tc+FZsml4fjqjafHvWqgRsXtzP2hx/tPrq8VSCpfVadAtMWofYbkKsTb+tKA28sCQOo/EOCpbpOENjOUMg5kMOf2tlZGaYOer6x1C0F6nd/xyj+R1KSJIVubQoVMZvsE8wHvKdl6BgIATSShf0GodVQlZUEmLJgMgFgsu9WNpilzQTnBvXEdCLmOt/zN8OeFMyrbw5LwojQ6gGurS4MPmw1pe1wL6e/o9YXRPxXFAgch6/+A4ycEawAu2sHzLcYg9Saz27TvO6NTp6C9eKIyujvKkjUXnKOeD3HoXJtCtK1NRKt1dfHPYjL4ALks3x5kkgUBD7kpHm7sQ3OPLG0DuGkUIgYAbZoN6MOSUyvsGNQVsObz2H4zymTSNmvxjF6EL0Y=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
