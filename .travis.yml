language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: "true"
  - ROLE_NAME: "redis"
  - EC2_REGION: "us-east-1"
  - secure: PmoHnr6j3TSUaO/JxxugA2F9fdV65Z46WUmYUTvvGN2nRy3Ypj5N8cfK6H6zoOfrR8kWIoLcxXwFQkjatAIENAyHr8AKLpx+HiTuvfzevhK6eipFyQTK+HCKmn5KCL4ChZO2sKysL6/wxtLWXOVfLL/zjKOzkOwNv+hITN/GMhdpBYtwuvdBaNrreEfs5q35OVP0JGg4hxmaJZSJTkj5gsgvIdPwUgE4xwkgCx/hUNEewglpvXGWdiqAyxZmJRHFaqfg50R97youG+wvcdrKbnyCzmuQQcxcbBxMFuqs9+V0dFzZsgoP6JxxA8w/slS//6QyCWUBNWEhbxCr7jnZJJmomBtYd98R+Yr+jCivSH7skCSlGomKGO5SAd+pD10EYJs+nRcdNcfMEdik8YF0j/5Hsh0NoDjv9ElvCYrYDYXcUbSdaqAl4/4SViZbJ0k8sfgeAa1fdpwlmyOYViC9x5mOH6ETbnonpATX/5HnbalJPAOmKQNve/abzjVeydNDIWxqITewGkQS2LjZDRY1nzNNpZ1XcmYjNJt776rbq3XwDrAsCbZTpU6pDZr/2MJDi3j6ENbusey6ID6qPzbKyTzcYa2kk+PokkRkHZ91cqSzeHhKAfCLGMrER/mB8L2VEjxHWVrO4z+9Z6NjfBOL12bl6w/JELP5vqsq+lCMtoo=
  - secure: zJ2r0eAuFzFPil9Ha6AjRzql4U8pEXeiiPWEPY2juRqubXtT7qwfEMNRZDjss+jqul/srfE38JdKWmBwSh4j1A8ZVJDt3t9fDi1sSJydydYCZBB3oPu2VDufqMzRZ7MJC63p4xnL4e8t2uaYyjTJSKxQXDJtgSu90kF2nPiwjUQ3iEi34VWKgzguChdNY8aQR3Z4mCdn9ZVtoNaPmQubbzkw3GAnXknNHsEGU/N7uO7btYW/S9TZZS9NhE32+1/0LH49vw3yFpWZh5t6CfGnDQavelXi3tILXNQilKPS1I6R2uTfyTKgRDjfIBnjJ8rfqQQdj1qgYfjcHIg+fSp3jCdJo0qwEr2bWm9483nNeqMudvimBjIUslt8YVBai8D6r0UErmzlxoT6FpgGOAWDKxJ5MEDiLekG1Eby76+DSvKcjcM0KeCsCbvoNPFemGt8W6FwLxakC9XCBrUWQJupaSchkWEnaYwRgacN4AH9hjUb85aQFdmvDB+AH4R5ESfqWp6umeOxzni/6lDkBazP82aLPqUkcQLgC2YIvVfxu4zTmTEdyzcT56qoeOnr9z3km0fV1kR+HRyPBGUmhkSeAcyjvbEHcYSBTnb+HLMQbsMy6EOZkUKunLd4XDNXqkYMlR+8QF1CvsYEo7k1wMDTpAp0076lloYiIlE1qpRc4Jk=
  - secure: YbQQCShM2O3y/JPCjPfYCzivmtwX84PwAB3w6EZ6LI3dEVNYr7akZqQ/nL257dGC3NMm/r56tvhePJY1zgCd88caWPkgWY4XeN/a56+2DiE0ooJZCxCZw+RNuqosMHByIbhpoQzl9m0wTs4qgxn7sBfgDpPqezqX8ulIDYXrG/Ik5/KD7qG7xdCR/2jpzfP67QXHSONkzBMIj13a1mD2X8WmfohKpW+tXogN4Uok8CBykyuMG4c0XPd+QMFCKZ879lMmmRL90DfZxJY2/3nBXsjeKpfGsmF10EB6gJV7v2DjfetMxhEjjxJiry3J4acQkn67DY0r9AcB6Hr6LVzZVFjDzgG+rZtdek0jAEU5BtsWd+CLXDQJfcfzWyqHgswFCqAbkQ9T4SVcukFIuo3hqLI2SWdsZIbRczi097GDV4VAUm+ndrcZ5GIuJJTYgEJjS2x34vk3KS3r1M43QC5hhdoDQz81KiIlHBEEutMdI1YUiymXB+7yuwOMU72b3hYKHsJgtxMiv+YEsyyLET5nUjTH4/R66ieDqYbcbMboWWyH6MFXa899MhXEpYU0D+WyeMljSJO0n2VSPyfmUusMi4nVhnqtLvuJFPeaQ/MWAClJUeSoaaZltqEfcjs4hGktZSYGL9Ok+qpLLkbH4KFapGeOkPr3NGBst/i3VStNCJU=
  - secure: dJiDLQQUDDkZAK2OCzVpCDJDprdzq6oaHhFpbDnPruYgqfWY6tnNIAls/DbREsufmQgibw4Vr7UK5qsVbHqlK0KypWvygopHcR0k4gzhhiURAeAk2hq6KlQamKEtcYNUxR5k5jDaYDllzkJSxyWzBBB2NPYVuEyG/Wlx01d9i2uVpGoFj48X9j1W3BsC+7AgKpGq/0lBvt5Z0e1vonBWHBVec+c+4+xGjvzy0L54JWkrdbMSzEc8WlsENYr+sP9mHi2nxy0s77J4y+DAIG3t7aZuF/cs+XNmy/ZtTMoofnZEo/tFKQPd9R3jlpwv1KyyJt4nUmTdM3rk6YQ18IRyJe41E7XImPvGO4OsZgw7FYQ31nR86ffLAL6qCdBJgqUu1wHL9fVDQUfSv1GxdfiPlgPWkbsimSBWK2p9SUyV8n670dBU0hvhTt4anuZ53qATyo0VpjGmMEzyjP5TVkT+wzvZsk0vOMGH61m3mSTJML4Kh3YUqgoM8oa1qLfaSD8IHrCyayYSrEarzeURG2Mq6rk8ZQQEvyOHRsPXdbL+efRs+Pam2PCjzv04KwSzxYNLTeGI+lbH8pKqyLoZbv428aV6TP7wF2Iu4o5O36pCisg82bYWiR9piSpuqLxWyfUTYyTjPXOeimU9w21Y2acaqerTFvhSDDbIWmoAxoA29Nw=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule --debug create --scenario-name aws
- molecule --debug converge --scenario-name aws
- molecule --debug verify --scenario-name aws
- molecule --debug destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
