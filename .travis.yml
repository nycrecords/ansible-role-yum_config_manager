language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: redis
  - EC2_REGION: us-east-1
  - secure: q2wAppJQ3L1jDBP/KinEwNa08WMEKXMoWUg56ww10EpVRA4hsqW+69RWw+gkjE8t0LlZ7pygYMCqpNxE3t+5kkKuuomB8MHqRqs2kbz2ZsmHrDUfWqkmuSEGGqoBDpIxABo8hnFq7EmBKO7+yEjVi1dv3ctOAglxV6EQKsO6J0HHKYWzu82mIJg8OqF4L0896i8EdJb5EeupD2GqZeMe+wK46p6JUtug++VFqsUV5qLwfEB+J3xH4/28QRSb1n8j5/VniaTkt5F9hRl7gTOJusudIRqOAMS57CQM0dl5GzsyotqVzDf4TUx2vybBTQGHGba0fKPc+7HlQp9pu83tj3FuPGoJT4LJAVU6TRSAzrVhQipuNpuX+YpuprMFfOyrdCMt+i0ogk5dabx7QopB2AgUDw9qjcEzxQly2OcAXmGkCnLdHhSsU61pbTvF+jJ1PnIa5mqwmlBOREPj1eLi/EYqP6141RvT1O9XqVXLhCzdrH/imp2VDKsV2sQQTIV9W0VSJ+ikDbl1fX4DnOYYiiMjp4BCoMsPpdxLFJGASfs0cIdI8LsYkp85X7BGcVCzeZ99O3L5HlxpURyIKjtZq3GZGx+6l2NvjZiTsfaRE5zWXDHK4anKAB41L76+gEtZuxwF5VtJzQvdy0jaTk2vDz27nr66rFMza/UuZnpSQFE=
  - secure: RsG1L6lVlVntPtESwhf7R3szZRAB2CG0soICK2zvhGMrGZZSMWJACVJ6MMZbeqWpQYWmWBlY6X65Ms6bW6QzbqX9NZrqeqRyQYUP6OMHEMAdWJ81o2nI2Skx92yhUqCAQ9wayERij8CVbUVivx1YrgA4IsyJXfskJaUG7zUcAXsPbXnw04PQ3vvmPDL4pCgOIudeGe15HV9KaWBHw31cT+y4pLHipKcvs4MTj57Vl8anJpagmYeNVh+JoavzA2CYy/CeGjXeiTy3LOl9hB9iHcrlhcCsoUsPm9OxNg4JHyI/RnOGK65RvWV3ECl1p5WXoQtBz7UrZEXQAcEOnLLGae8VA6EWRVxJwaml6E2IYUEghtpmFRd0msVOqo+jyX9HehhE5Nl4QWPbW9yv09ofKIIcOqf31D7vLnAU1YygQSIBbFinezGY+r78HaUpAfw/YXVNnbHIJPnfK+YTuyzo7w5lR4XUE9QesRPgiAuTr8opYjl3SEdsF5Vr2dESFvvIX4iWaWFjT2RtPj3CEt3VdQNL5hUcaa3SB3lxVUK0XVK9eP8xYUYhpv8iRDbm0MrgvNkGPIDgm4DCZQFembzHKITEUO6GoqYFNoUIldq5yfv3+VLkMtMgwlp+rb6L22zQfvFav/0G/wwgS5znWjPaFFscGRH8/fgCSxrXgyrkNM4=
  - secure: jogtPbbpsLQAks4lcHXq2k+W2DB9DMo0Nv4bXEzAsxqv4OZ8A2UT/QgACuCjKMXxXFzmX6XoIlIU5UIf2rFYn5fXpmtjIY1TLQkYYT2lF/8O/W8VJwbRjVlMIJhVktlpxW6TsW7JKIKhYJRD0OsOGG05E1WllgULNT7DxZP62LhFUdLywf4HAOIPbsyk6LZ2NNpP8y8G3/j16Q5rfGjXY9I1vDlA9J7hOfExWbbJ7x51mKuSifNwJiG6OLsdJ/zOm43LUkpTp4JO3aOiSf+eU6ExYTkGjyb/r2kYMqG8WOR4zPzPNqt878s1CT9QNFHt/ZOMIHhMIWug9/42tiAITjPUxCzvkfLB4ppDVzYMVw/ClisOLmwK0yPM2O5fCNVyQ2RiFnymLxQCvFAC9dyRcXfNFxo1Z5rx0Soj8fuOpII73EediU1HvVQPutWZsg51ZPZYRP/RY9JbG3w1MbgUxUEHeZ9EghLxsX2paraXarKvSFADgycjEdDUjt1hx3f4Ux7VOMV811PXALS7XWK1xjACfofjv+PqLaVS5iPIsyOizp7iRkyBgE9HPCa8/KbZLYVkswb/ezFG6L6wMyWbxb3o9noesLYlAKeo+x0ZGmcZGawR74zHX/YThFkDgq8iBTi+f0kgbpn5b7quTALMOvG+yA1FqoEAD0kdOlhmnMM=
  - secure: SaN+d0NLqpW9DtXWaGfzoWw3hY69hRzjmmulLwKUxmOdrMjl2VMLFgUzId+0MpqAySEuO2DmAKE7LaZY5zH8vFuaHNKpVTBGBEvADvieqn55SA+LJm/ockWg5Xsb4w4NLA7JgVTrR9JvZUf20o1X+jY6a8GD2lRdlLo/4Q3LkZ2IntHIQtHd7QZJRhoAajaegwJ+qI+FdpCNna2KROAflkZwPeHQC6BeSemXEd5rZYHVXDe+EeZ7R8ztXg47DC/0aV3R8QtX4qQmETxrkwDVpmf7WIWJTLU0HyPMtonCrBiMoDlbi1TzpppIpftoKll+zBSXDMm81ajOPA0STkLb8w8UaUmVrtpibf/HenaRWeey6D3ahtL+IOAfJwWvgutnXs/Lnsl8zE5TzW/guVAl8e8Lmm5XO6DwzUmyKF8CE4x859Q5f9ZxxQ4s1eK+SlYQvia7gM+xIRvL8SjbcozYE/zHLQ3A55IM4tsdPeo+uB8hrxbkP8z+e+hHJOFeqDVnUF031OJXsnZodEPMylkCBXFKbFAvFDy+gqNrCvSlYFM8ECkyN4dbNoydeDQU7zlvMyur9qd/G73uV6Pk2n14iiTWmf50CQ42PDuEo/F7/k/gU+1UZW9hC1msMyA8iYY8m57QH7L/6omJn1DmfGwMUxHPMpoal35v+TTZ1ewLmfw=
install:
- pip install pipenv
- pipenv install
- aws configure set AWS_ACCESS_KEY $AWS_ACCESS_KEY
- aws configure set AWS_SECRET_KEY $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
